<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=big5">
<meta name="GENERATOR" content="Microsoft FrontPage 5.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>Database Course Page</title>
</head>

<body>
<p:colorscheme colors="#CCECFF,#000000,#666699,#CC3300,#FFCCCC,#CCCC00,#FF9900,#FF9933" />
<div v:shape="_x0000_s1026">
  <div class="O" style="mso-line-spacing:&quot;80 35 0&quot;;mso-margin-left-alt:216">
    <span style="font-family:Times New Roman;layout-flow:vertical">
    <span style="mso-special-format:
bullet;color:#CC3300;mso-color-index:3;position:absolute;left:-4.33%;
top:.1em;font-family:&quot;Monotype Sorts&quot;;font-size:90%">n</span></span></div>
  <div class="O" style="mso-line-spacing:&quot;80 35 0&quot;;mso-margin-left-alt:216">
    <span style="font-family:Times New Roman;layout-flow:vertical">
    <span style="mso-special-format:
bullet;color:#CC3300;mso-color-index:3;position:absolute;left:-4.33%;
top:.1em;font-family:&quot;Monotype Sorts&quot;;font-size:90%">n</span></span></div>
  <div class="O" style="mso-line-spacing:&quot;80 35 0&quot;;mso-margin-left-alt:216">
    <span style="font-family:Times New Roman;layout-flow:vertical">
    <span style="mso-special-format:
bullet;color:#CC3300;mso-color-index:3;position:absolute;left:-4.33%;
top:.1em;font-family:&quot;Monotype Sorts&quot;;font-size:90%">n</span></span></div>
  <div class="O" style="mso-line-spacing:&quot;80 35 0&quot;;mso-margin-left-alt:216">
    <span style="font-family:Times New Roman;layout-flow:vertical">
    <span style="mso-special-format:
bullet;color:#CC3300;mso-color-index:3;position:absolute;left:-4.33%;
top:.1em;font-family:&quot;Monotype Sorts&quot;;font-size:90%">n</span></span></div>
</div>
<p align="center">
<font face="Times New Roman">
<br><img border="0" src="images/untitled.bmp" width="800" height="2"><br>

</font>

</p>

<p align="center"><b><font face="Times New Roman" size="6">Database, Spring, 
2005 </font></b></p>

<p align="center"><b><font face="Times New Roman" style="font-size: 16pt">Course No.: CS3010302</font></b></p>

<p align="center"><b>
<font face="Times New Roman" style="font-size: 16pt">Instructor:
<a HREF="mailto:pao@mail.ntust.edu.tw">
鮑興國 Ph.D.</a></font></b></p>

<p align="center"><b><font face="Times New Roman" style="font-size: 16pt">
National Taiwan University of Science and Technology</font></b></p>

<p align="center">　</p>

<p align="center">
<font face="Times New Roman">
<img border="0" src="images/untitled.bmp" width="800" height="2"></font></p>

<h1><p align="center"><font color="#FF0000">New:</font></p></h1>

<p align="center"><font color="#FF0000"><h1><p align="center">Final June 11, 14:00 IB-601</p></h1></font></p>

<p align="center"><font color="#FF0000">&nbsp;<a href="#Homework">Solution to 
Homework 2</a></font></p>

<p align="center"><font color="#FF0000"><a href="#Misc">Answer to page 153</a></font></p>

<p align="center">
<font face="Times New Roman">
<img border="0" src="images/untitled.bmp" width="800" height="2"></font></p>

<p align="left"><font face="Times New Roman" style="font-size: 16pt"><b>
Instructor:</b> Hsing-Kuo Pao <b><a href="mailto:pao@mail.ntust.edu.tw">鮑興國</a></b> 
, 第四教學大樓 T4-505 , 2730-1065</font></p>

<p align="left"><font face="Times New Roman"><b><font style="font-size: 16pt">Lectures time:</font></b><font style="font-size: 16pt"> 
Mon. 8:30-10:20, Thu. 9:30-10:20</font></font></p>

<p align="left"><font style="font-size: 16pt" face="Times New Roman"><b>location</b>: IB-701</font></p>

<p align="left"><font face="Times New Roman" style="font-size: 16pt"><b>Teaching 
Assistants:</b></font></p>

<ul>
  <li>

<p align="left"><b>
<font face="Times New Roman" style="font-size: 16pt">&nbsp;<a HREF="mailto:M9315018@mail.ntust.edu.tw">陳慶豪 (M9315018)</a></font></b></p>

  </li>
  <li>

<p align="left"><b><font face="Times New Roman" style="font-size: 16pt">
&nbsp;<a HREF="mailto:M9315039@mail.ntust.edu.tw">林家正 (M9315039)</a></font></b></p>

  </li>
</ul>

<p align="left"><font face="Times New Roman" style="font-size: 16pt"><b>
Textbook:</b></font></p>

<ul>
  <li>

<p align="left"><font face="Times New Roman" style="font-size: 16pt">Database – 
system concepts (4th ed.) by Silberschatz, Korth, Sudarshan, 2002</font></p>

  </li>
  <li>

<p align="left"><font face="Times New Roman" style="font-size: 16pt">
Fundamentals of Database Systems (4th ed.) by Elmasri &amp; Navathe, 2004</font></p>

  </li>
</ul>

<p align="left">
<font face="Times New Roman" style="font-size: 16pt; font-weight: 700">Grading:</font></p>

<ul>
  <li>

<p align="left"><font face="Times New Roman" style="font-size: 16pt">midterm 
(30%), final (40%) 6 (1 per 2~3 weeks) homework (30%)</font></p>

  </li>
  <li>

<p align="left"><font face="Times New Roman" style="font-size: 16pt">1 
programming hw at most!</font></p>

  </li>
</ul>

<p align="left"><font style="font-size: 16pt" face="Times New Roman"><b>Course page:</b>
<a href="http://140.118.155.153/~web/teach/db2005.htm">
http://140.118.155.153/~web/teach/db2005.htm</a></font></p>

<p align="left">　</p>

<p align="center">
<font face="Times New Roman">
<img border="0" src="images/untitled.bmp" width="800" height="2"></font></p>

<p align="left">　</p>

<p><u><strong><font size="6" face="Times New Roman" color=#008000>Slides in 
the Class</font></strong></u></p>

<p>
<font size="5" color="#0000FF" face="Times New Roman"><a href="db/2005_spr/ch1.ppt">Ch1. Introduction</a></font></p>
<p>
<font size="5" color="#0000FF" face="Times New Roman"><a href="db/2005_spr/ch2.ppt">Ch2. 
Entity-Relationship Model</a></font></p>

<p align="left">
<font size="5" color="#0000FF" face="Times New Roman">
<a href="db/2005_spr/ch3.ppt">Ch3. 
Relational Model</a></font></p>

<p align="left">
<font size="5" color="#0000FF" face="Times New Roman">
<a href="db/2005_spr/ch4.ppt">Ch4. SQL</a></font></p>

<p align="left">
<font size="5" color="#0000FF" face="Times New Roman">
<a href="db/2005_spr/ch7.ppt">Ch7. Relational-Database Design</a></font></p>

<p align="left">
<font size="5" color="#0000FF" face="Times New Roman">
<a href="db/2005_spr/ch10.ppt">Ch10. XML</a></font></p>

<p align="left">
<font size="5" color="#0000FF" face="Times New Roman">
<a href="db/2005_spr/ch15.ppt">Ch15. Transactions</a></font></p>

<p align="left">
<font size="5" color="#0000FF" face="Times New Roman">
<a href="db/2005_spr/ch16.ppt">Ch16. Concurrency Control</a></font></p>

<p align="center">
<font face="Times New Roman">
<img border="0" src="images/untitled.bmp" width="800" height="2"></font></p>

<p align="left">　</p>

<p><u><strong><font size="6" face="Times New Roman" color="#008000">
<a name="Homework"></a>Homework</font></strong></u></p>

<p align="left">
<font face="Times New Roman"><u><b>
<font face="Times New Roman" style="font-size: 16pt">Homework 1</font></b></u></font></p>

<font face="Times New Roman">
<p><u><b><font face="Times New Roman" style="font-size: 16pt">Homework 2</font></b></u></p>
<p><font style="font-size: 16pt">Due: Apr. 21</font></p>
<p class="MsoNormal"><span lang="EN-US"><font size="4">1.</font><span style="font-style: normal; font-variant: normal; font-weight: normal; font-family: Times New Roman"><font size="4">&nbsp;</font></span><font size="4">We 
have a DBMS for student course offering. There are relations in the database 
(keys are with underscore): <i>Course</i>(<u>c#</u>, title, credits, year, time, 
room), <i>Instructor</i>(dept, <u>iid#</u>, name), <i>Student</i>(dept, <u>sid#</u>, 
name), <i>Enrols</i>(<u>sid#</u>, <u>c#</u>, grade), <i>Teaches</i>(<u>iid#</u>,
<u>c#</u>), <i>TAs</i>(<u>sid#</u>, <u>c#</u>). Please write down the answer for 
the following questions, each by (1) relational algebra, (2) tuple relational 
calculus, (3) SQL.</font></span></p>
<p class="MsoNormal"><span lang="EN-US"><font size="4">You may write the 
relations with the abbreviations: <i>C</i>(c#, t, cd, y, tm, r), <i>I</i>(d, iid#, 
n), <i>S</i>(d, sid#, n), <i>E</i>(sid#, c#, g), <i>T</i>(iid#, c#), <i>TA</i>(sid#, 
c#). Some principles: students can take many courses, and can be TAs in many 
courses. Professors can be instructors in many courses. You can assume all keys 
are unique, and course titles are unique.</font></span></p>
<p class="MsoNormal"><span lang="EN-US"><font size="4">(a)&nbsp; Find all 
courses(including all information) offered in 2005.</font></span></p>
<p class="MsoNormal"><span lang="EN-US"><font size="4">(b)&nbsp; Find all 
students’ names in the course “Database”.</font></span></p>
<p class="MsoNormal"><span lang="EN-US"><font size="4">(c)&nbsp; Find all people’s 
names (including teachers and students) in the department “CS”.</font></span></p>
<p class="MsoNormal"><span lang="EN-US"><font size="4">(d)&nbsp; Find all 
people’s names who are students, but not TAs. For SQL, please list your answer 
by department.</font></span></p>
<p class="MsoNormal"><span lang="en-us"><font size="4">(e)&nbsp; Find all 
courses</font></span><span lang="EN-US"><font size="4">’ titles which are taught 
by more than one (&gt;1) teacher.<font color="#0000FF"> (by SQL only)</font></font></span></p>
<p class="MsoNormal"><span lang="EN-US"><font size="4">(f)&nbsp; Find John’s course 
no. which he has grade above 80 (included).</font></span></p>
<p class="MsoNormal"><span lang="EN-US"><font size="4">(g)&nbsp; Find all students (sid#) 
who have average grades above 70 (included). <font color="#0000FF">(by SQL only)</font></font></span></p>
<p><span lang="EN-US" style="font-family: Times New Roman"><font size="4">
(h)&nbsp;&nbsp;Find the students (names) who take all courses offered in 2005.</font></span></p>
<p>　</p>
<p><span lang="en-us"><font size="4">2. p.129, 3.13</font></span></p>
<p><span lang="en-us"><font size="4">3. p.185, 4.4.</font></span></p>
<p><font size="4">(</font><font size="4" color="#0000FF" face="Times New Roman"><a href="db/2005_spr/hw2_sol.pdf">suggested 
solution</a></font><font size="4">)</font></p>
<p><u><b><font face="Times New Roman" style="font-size: 16pt">Homework 3</font></b></u></font></p>
<p><u><b><font face="Times New Roman" style="font-size: 16pt">Final Project</font></b></u></font></p>
<font face="Times New Roman" style="font-size: 16pt"><a href="db/2005_spr/login.ppt">Login Server使用說明</a></font>
<p><font size="4">(</font><font size="4" color="#0000FF" face="Times New Roman"><a href="db/2005_spr/lib.txt">Test Data</a></font><font size="4">)</font></p>
<p>
<img border="0" src="images/untitled.bmp" width="800" height="2"></p>
<p>　</p>
</font>

<p><strong><u><font face="Times New Roman" size="6" color="#008000">
<a name="Misc"></a>Misc</font></u></strong></p>

<p><font face="Times New Roman"><font style="font-size: 16pt">1. Asnwer</font><font style="font-size: 16pt"> 
to textbook page 153</font></font></p>
<p><font face="Times New Roman" size="4">In textbook page 153:</font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4"><b>select</b> <b>distinct</b> <i>S</i>.<i>customer-name</i></font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4"><b>from</b> <i>depositor</i> <b>as</b> <i>
S</i></font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4"><b>where</b> <b>not exists</b> ((<b>select</b>
<i>branch-name</i></font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<b>&nbsp; from</b> <i>branch</i></font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<b>&nbsp; where</b> <i>branch-city</i> = 'Brooklyn')</font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<b>&nbsp; except</b></font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
(<b>select</b> <i>R.branch-name</i></font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<b>&nbsp;from</b> <i>depositor</i> <b>as</b> <i>T</i>, <i>account</i> <b>as</b>
<i>R</i></font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<b>&nbsp;where</b> <i>T.account-number</i> = <i>R.account-number</i> and</font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<i>S.customer-name</i> = <i>T.customer-name</i>))</font></p>
<p style="margin-top: 0; margin-bottom: 0">　</p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4" color="#FF0000">cannot be changed to</font></p>
<p style="margin-top: 0; margin-bottom: 0">　</p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4"><b>select</b> <b>distinct</b> <i>S</i>.<i>customer-name</i></font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4"><b>from</b> <i>depositor</i> <b>as</b> <i>
S</i></font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4"><b>where</b> <b>not exists</b> ((<b>select</b>
<i>branch-name</i></font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<b>&nbsp; from</b> <i>branch</i></font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<b>&nbsp; where</b> <i>branch-city</i> = 'Brooklyn')</font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<b>&nbsp; except</b></font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
(<b>select</b> <i>R.branch-name</i></font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<b>&nbsp;from</b> <i>account</i> <b>as</b> <i>R</i></font></p>
<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<b>&nbsp;where</b> <i>S.account-number</i> = <i>R.account-number</i>))</font></p>
<p style="margin-top: 0; margin-bottom: 0">　</p>

<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">In the second one, for each depositor <i>S</i>, 
a check of account number equality is done; i.e.,</font></p>

<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">selecting all <i>R</i>'s where <i>
S.account-number</i> = <i>R.account-number</i> for a given <i>depositor</i> <i>S</i>.</font></p>

<p style="margin-top: 0; margin-bottom: 0">
<font face="Times New Roman" size="4">Clearly, it is not what we want. We want 
to collect all accounts for a given <font color="#FF0000">name</font>.</font></p>

<p>　</p>

<p align="center"><font face="Times New Roman">(Revised in Jun 10)</font></p>
</body>

</html>